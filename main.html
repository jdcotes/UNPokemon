
<!DOCTYPE html>
<html>
  <head>
    <style>
      html,body {
          height: 100%;
          margin: 0 auto;
          padding: 0;
        } 
        #map {
          height: 600px;
          width: 800px;
        }
        #map1 {
          height: 600px;
          width: 800px;
        }
    </style>
  </head>
  <body>
    <div id="map1"></div>
    <div id="map"></div>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDsFelqvBHeiBZ9KEmCJ31cVXQjdo0aASk&callback=initMap">
    </script>
    <script type="text/javascript">
      var map2;
      var lat;
      var lng;
      var latold = 0;
      var lngold = 0;
      var marker = [];
      var entro = 0;
      var myLatLng;
      {$('#map').load('pokemap.jsp').fadeIn("slow");}
      var auto_refresh = setInterval(function (){$('#map').load('pokemap.jsp').fadeIn("slow");}, 300000); 
      var intevalo1 = setInterval('CurrentPosition()',5000);
   

      function initMap() {
        map2 = new google.maps.Map(document.getElementById('map1'), {
          center: {lat: 11.019195, lng: -74.850409},
          zoom: 17
        });
      }
      function CurrentPosition(){
        navigator.geolocation.getCurrentPosition(onSuccessGeolocating, onErrorGeolocating,{enableHighAccuracy: true,maximumAge:5000,timeout:10000});
      }

      function onSuccessGeolocating(position){
        lat = position.coords.latitude;
        lng = position.coords.longitude;
        
        if ((Math.abs(lat-latold)>0.0001) || (Math.abs(lng-lngold)>0.0001)){
          myLatLng = new google.maps.LatLng(lat,lng);
          latold = lat;
          lngold = lng;
        }
        
        if (entro==0){
         
          var image = 'Marcadores/Pokemarker.png';
         marker = new google.maps.Marker({
         position: {lat: 11.019195, lng: -74.850409},
         map: map2,   
         icon: image          
         });
         entro=1;
          
        }
       
       drawmarkertrainer();
      }

      function onErrorGeolocating(position){
        alert("No se adquirieron datos");
      }
      
      function drawmarkertrainer(){
        console.log("Estoy funcionando");
        marker.setMap(null);
        var image = 'Marcadores/Pokemarker.png';
        marker = new google.maps.Marker({
         position: myLatLng,
         map: map2,
         icon: image  
        });

      }
    </script>
    <input type= text value = "0"  id="control" style="display: none" />
    
  </body>
</html>